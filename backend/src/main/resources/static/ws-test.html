<!-- ê²½ë¡œ: src/main/resources/static/ws-test.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WebSocket Test</title>
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
</head>
<body>
<h2>WebSocket Test Page</h2>
<div>
    <input type="text" id="messageInput" placeholder="ë©”ì‹œì§€ ìž…ë ¥" />
    <button onclick="sendMessage()">Send</button>
</div>
<pre id="log"></pre>

<script>
    const log = (msg) => {
        document.getElementById("log").textContent += msg + "\n";
    };

    const socket = new SockJS("/ws");
    const stompClient = Stomp.over(socket);

    stompClient.connect({}, function (frame) {
        log("Connected: " + frame);

        stompClient.subscribe("/user/queue/messages/1", function (message) {
            log("ðŸ“¥ Received: " + message.body);
        });

        log("Subscribed to /user/queue/messages/1");
    });

    function sendMessage() {
        const msg = document.getElementById("messageInput").value;
        stompClient.send("/app/chat/1/send", {}, JSON.stringify(msg));
        log("ðŸ“¤ Sent: " + msg);
    }
</script>
</body>
</html>
